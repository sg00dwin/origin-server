#
# Limit resources for a new Libra guest user on a node
#

#
# Quotas: File system limits
#
quota_files=10000
quota_blocks=131072 # 128MByte.  1 block = 1024byte 

# PAM - resource limits
# limits_core
#<item> can be one of the following:
# limits_core=unlimited         # limits the core file size (KB)
# limits_data=unlimited         # max data size (KB)
# limits_fsize=unlimited        # maximum filesize (KB)
# limits_memlock=unlimited      # max locked-in-memory address space (KB)
# limits_nofile=unlimited       # max number of open files
# limits_rss=unlimited          # max resident set size (KB)
# limits_stack=unlimited        # max stack size (KB)
# limits_cpu=unlimited          # max CPU time (MIN)
limits_nproc=50        # max number of processes
# limits_as=unlimited           # address space limit (KB)
# limits_maxlogins=unlimited    # max number of logins for this user
# limits_maxsyslogins=unlimited # max number of logins on the system
# limits_priority=unlimited     # the priority to run user process with
# limits_locks=unlimited        # max number of file locks the user can hold
# limits_sigpending=unlimited   # max number of pending signals
# limits_msgqueue=unlimited     # max memory used by POSIX message queues (bytes)
# limits_nice=19   # max nice priority allowed to raise to values: [-20, 19]
# limits_rtprio=19 # max realtime priority

#
# cgroups - more resource limits
#
#
# cpu
# cpu_rt_period_us=100000
# cpu_rt_runtime_us=950000
cpu_shares=128
#
# memory
# 1024 * 1024 * 256 = 268435456 = 256MB
memory_limit_in_bytes=268435456
memory_memsw_limit_in_bytes=268435456
# memory_soft_limit_in_bytes=-1
# memory_swappiness=60

#
# Apache bandwidth limit
# 
apache_bandwidth="all 500000"
apache_maxconnection="all 20"
apache_bandwidtherror="510"
#

# Traffic control.  used by /etc/init.d/libra-tc
tc_max_libra=8000   # mbit/sec - Total bandwidth allowed for Libra
tc_user_share=2     # mbit/sec - one user is alloted...
tc_oversubscribe=10 # multiplier
# but may borrow up to.. if available
# tc_user_limit=$(expr $tc_user_share \* $tc_oversubscribe) # mbit/sec
